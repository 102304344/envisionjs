// Envision.js
// (c) 2012 Carl Sutherland, Humble Software
// Distributed under the MIT License
// Source: http://www.github.com/HumbleSoftware/envisionjs
// Homepage: http://www.humblesoftware.com/envision
/**
 * Templates namespace.
 *
 * Templates are pre-built interactive visualizations fitting common
 * use-cases.  These include several components together with 
 * interactions and configuration for each.  They may have their own
 * custom configuration options as well.
 */
envision.templates=envision.templates||{},function(){function b(a){var b=a.resolution;a.preprocessor.bound(a.min,a.max).subsampleMinMax(b+Math.round(b/3))}function c(){return{price:{name:"envision-finance-price",flotr:{"lite-lines":{lineWidth:1,show:!0,fill:!0,fillOpacity:.2},mouse:{track:!0,trackY:!1,trackAll:!0,sensibility:1,trackDecimals:4,position:"ne"},yaxis:{autoscale:!0,autoscaleMargin:.05,noTicks:4,showLabels:!0,min:0}},processData:b},volume:{name:"envision-finance-volume",flotr:{whiskers:{show:!0,lineWidth:2},mouse:{track:!0,trackY:!1,trackAll:!0},yaxis:{autoscale:!0,autoscaleMargin:.5}},processData:b},summary:{name:"envision-finance-summary",flotr:{"lite-lines":{show:!0,lineWidth:1,fill:!0,fillOpacity:.2,fillBorder:!0},xaxis:{noTicks:5,showLabels:!0},yaxis:{autoscale:!0,autoscaleMargin:.1},handles:{show:!0},selection:{mode:"x"},grid:{verticalLines:!1}}},connection:{name:"envision-finance-connection",adapterConstructor:a.components.QuadraticDrawing}}}function d(b){var d=b.data,e=c(),f=new a.Visualization({name:"envision-finance"}),g=new a.Interaction,h=new a.Interaction,i,j,k,l;b.defaults&&(e=Flotr.merge(e,b.defaults)),e.price.data=d.price,e.volume.data=d.volume,e.summary.data=d.summary,e.price.flotr.mouse.trackFormatter=b.trackFormatter||function(a){var b=a.index,c="Price: $"+d.price[1][b]+", Vol: "+d.volume[1][b],e;return c},b.xTickFormatter&&(e.summary.flotr.xaxis.tickFormatter=b.xTickFormatter),e.price.flotr.yaxis.tickFormatter=b.yTickFormatter||function(a){return"$"+a},i=new a.Component(e.price),j=new a.Component(e.volume),k=new a.Component(e.connection),l=new a.Component(e.summary),f.add(i).add(j).add(k).add(l).render(b.container),g.follower(i).follower(j).follower(k).leader(l).add(a.actions.selection,b.selectionCallback?{callback:b.selectionCallback}:null),h.group([i,j]).add(a.actions.hit),b.selection&&l.trigger("select",b.selection),this.vis=f,this.selection=g,this.hit=h,this.price=i,this.volume=j,this.summary=l}var a=envision;a.templates.Finance=d}(),function(){function b(){return{detail:{name:"envision-timeseries-detail",flotr:{}},summary:{name:"envision-timeseries-summary",flotr:{handles:{show:!0},selection:{mode:"x"},yaxis:{autoscale:!0,autoscaleMargin:.1}}},connection:{name:"envision-timeseries-connection",adapterConstructor:a.components.QuadraticDrawing}}}function c(c){var d=c.data,e=b(),f=new a.Visualization({name:"envision-timeseries"}),g=new a.Interaction,h,i,j;c.defaults&&(e=Flotr.merge(e,c.defaults)),e.detail.data=d.detail,e.summary.data=d.summary,h=new a.Component(e.detail),j=new a.Component(e.connection),i=new a.Component(e.summary),f.add(h).add(j).add(i).render(c.container),g.add(a.actions.selection).follower(h).follower(j).leader(i),this.vis=f,this.selection=g,this.detail=h,this.summary=i}var a=envision;a.templates.TimeSeries=c}(),function(){function c(){return{name:"zoom",flotr:{}}}function d(){return{name:"summary",flotr:{handles:{show:!0},selection:{mode:"x"}}}}function e(a,b){var c=_.defaults(a,b);return c.flotr=_.defaults(c.flotr,b.flotr),c}var a=envision,b;b=function(b){var f=new a.Visualization,g=new a.Component(e(b.zoom||{},c())),h=new a.Component(e(b.summary||{},d())),i=new a.Interaction({leader:h});f.add(g).add(h),i.add(a.actions.selection),i.follower(g),this.vis=f,this.interaction=i,b.container&&this.render(b.container)},b.prototype={render:function(a){this.vis.render(a)}},a.templates.Zoom=b}()